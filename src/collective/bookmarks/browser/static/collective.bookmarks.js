var collectivebookmarks=function(e){"use strict";function t(){}function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function a(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function u(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function h(){return p(" ")}function m(){return p("")}function g(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}class b{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=f(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)c(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(l)}}let k;function w(e){k=e}function E(e){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.after_update.push(e)}const x=[],S=[],O=[],$=[],C=Promise.resolve();let j=!1;function A(e){O.push(e)}let N=!1;const R=new Set;function T(){if(!N){N=!0;do{for(let e=0;e<x.length;e+=1){const t=x[e];w(t),L(t.$$)}for(x.length=0;S.length;)S.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];R.has(t)||(R.add(t),t())}O.length=0}while(x.length);for(;$.length;)$.pop()();j=!1,N=!1,R.clear()}}function L(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const B=new Set;function U(e,t){-1===e.$$.dirty[0]&&(x.push(e),j||(j=!0,C.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _(e,i,s,u,c,d,f=[-1]){const p=k;w(e);const h=i.props||{},m=e.$$={fragment:null,ctx:null,props:d,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:r(),dirty:f,skip_bound:!1};let g=!1;if(m.ctx=s?s(e,h,(t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),g&&U(e,t)),n}):[],m.update(),g=!0,o(m.before_update),m.fragment=!!u&&u(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(l)}else m.fragment&&m.fragment.c();i.intro&&((y=e.$$.fragment)&&y.i&&(B.delete(y),y.i(v))),function(e,t,r){const{fragment:i,on_mount:s,on_destroy:u,after_update:c}=e.$$;i&&i.m(t,r),A(()=>{const t=s.map(n).filter(a);u?u.push(...t):o(t),e.$$.on_mount=[]}),c.forEach(A)}(e,i.target,i.anchor),T()}var y,v;w(p)}class P{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const q=[];const D="collective.bookmarks";var M=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},F=Object.prototype.toString;function H(e){return"[object Array]"===F.call(e)}function z(e){return void 0===e}function I(e){return null!==e&&"object"==typeof e}function J(e){if("[object Object]"!==F.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function X(e){return"[object Function]"===F.call(e)}function V(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),H(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var K={isArray:H,isArrayBuffer:function(e){return"[object ArrayBuffer]"===F.call(e)},isBuffer:function(e){return null!==e&&!z(e)&&null!==e.constructor&&!z(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:I,isPlainObject:J,isUndefined:z,isDate:function(e){return"[object Date]"===F.call(e)},isFile:function(e){return"[object File]"===F.call(e)},isBlob:function(e){return"[object Blob]"===F.call(e)},isFunction:X,isStream:function(e){return I(e)&&X(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:V,merge:function e(){var t={};function n(n,r){J(t[r])&&J(n)?t[r]=e(t[r],n):J(n)?t[r]=e({},n):H(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)V(arguments[r],n);return t},extend:function(e,t,n){return V(t,(function(t,r){e[r]=n&&"function"==typeof t?M(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function G(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Q=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(K.isURLSearchParams(t))r=t.toString();else{var o=[];K.forEach(t,(function(e,t){null!=e&&(K.isArray(e)?t+="[]":e=[e],K.forEach(e,(function(e){K.isDate(e)?e=e.toISOString():K.isObject(e)&&(e=JSON.stringify(e)),o.push(G(t)+"="+G(e))})))})),r=o.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function W(){this.handlers=[]}W.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},W.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},W.prototype.forEach=function(e){K.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Y=W,Z=function(e,t,n){return K.forEach(n,(function(n){e=n(e,t)})),e},ee=function(e){return!(!e||!e.__CANCEL__)},te=function(e,t){K.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},ne=function(e,t,n,r,o){return function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,o)},re=K.isStandardBrowserEnv()?{write:function(e,t,n,r,o,a){var i=[];i.push(e+"="+encodeURIComponent(t)),K.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),K.isString(r)&&i.push("path="+r),K.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},oe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ae=K.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=K.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},ie=function(e){return new Promise((function(t,n){var r=e.data,o=e.headers;K.isFormData(r)&&delete o["Content-Type"],(K.isBlob(r)||K.isFile(r))&&r.type&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",s=unescape(encodeURIComponent(e.auth.password))||"";o.Authorization="Basic "+btoa(i+":"+s)}var u,c,l=(u=e.baseURL,c=e.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,c):c);if(a.open(e.method.toUpperCase(),Q(l,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var r,o,i,s,u,c="getAllResponseHeaders"in a?(r=a.getAllResponseHeaders(),u={},r?(K.forEach(r.split("\n"),(function(e){if(s=e.indexOf(":"),o=K.trim(e.substr(0,s)).toLowerCase(),i=K.trim(e.substr(s+1)),o){if(u[o]&&oe.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([i]):u[o]?u[o]+", "+i:i}})),u):u):null,l={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:c,config:e,request:a};!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(ne("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,l),a=null}},a.onabort=function(){a&&(n(ne("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(ne("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(ne(t,e,"ECONNABORTED",a)),a=null},K.isStandardBrowserEnv()){var d=(e.withCredentials||ae(l))&&e.xsrfCookieName?re.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in a&&K.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)})),K.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),n(e),a=null)})),r||(r=null),a.send(r)}))},se={"Content-Type":"application/x-www-form-urlencoded"};function ue(e,t){!K.isUndefined(e)&&K.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ce,le={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(ce=ie),ce),transformRequest:[function(e,t){return te(t,"Accept"),te(t,"Content-Type"),K.isFormData(e)||K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)?e:K.isArrayBufferView(e)?e.buffer:K.isURLSearchParams(e)?(ue(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):K.isObject(e)?(ue(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};le.headers={common:{Accept:"application/json, text/plain, */*"}},K.forEach(["delete","get","head"],(function(e){le.headers[e]={}})),K.forEach(["post","put","patch"],(function(e){le.headers[e]=K.merge(se)}));var de=le;function fe(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var pe=function(e){return fe(e),e.headers=e.headers||{},e.data=Z(e.data,e.headers,e.transformRequest),e.headers=K.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),K.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||de.adapter)(e).then((function(t){return fe(e),t.data=Z(t.data,t.headers,e.transformResponse),t}),(function(t){return ee(t)||(fe(e),t&&t.response&&(t.response.data=Z(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},he=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function s(e,t){return K.isPlainObject(e)&&K.isPlainObject(t)?K.merge(e,t):K.isPlainObject(t)?K.merge({},t):K.isArray(t)?t.slice():t}function u(r){K.isUndefined(t[r])?K.isUndefined(e[r])||(n[r]=s(void 0,e[r])):n[r]=s(e[r],t[r])}K.forEach(r,(function(e){K.isUndefined(t[e])||(n[e]=s(void 0,t[e]))})),K.forEach(o,u),K.forEach(a,(function(r){K.isUndefined(t[r])?K.isUndefined(e[r])||(n[r]=s(void 0,e[r])):n[r]=s(void 0,t[r])})),K.forEach(i,(function(r){r in t?n[r]=s(e[r],t[r]):r in e&&(n[r]=s(void 0,e[r]))}));var c=r.concat(o).concat(a).concat(i),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return K.forEach(l,u),n};function me(e){this.defaults=e,this.interceptors={request:new Y,response:new Y}}me.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=he(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[pe,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},me.prototype.getUri=function(e){return e=he(this.defaults,e),Q(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},K.forEach(["delete","get","head","options"],(function(e){me.prototype[e]=function(t,n){return this.request(he(n||{},{method:e,url:t}))}})),K.forEach(["post","put","patch"],(function(e){me.prototype[e]=function(t,n,r){return this.request(he(r||{},{method:e,url:t,data:n}))}}));var ge=me;function ye(e){this.message=e}ye.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ye.prototype.__CANCEL__=!0;var ve=ye;function be(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new ve(e),t(n.reason))}))}be.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},be.source=function(){var e;return{token:new be((function(t){e=t})),cancel:e}};var ke=be;function we(e){var t=new ge(e),n=M(ge.prototype.request,t);return K.extend(n,ge.prototype,t),K.extend(n,t),n}var Ee=we(de);Ee.Axios=ge,Ee.create=function(e){return we(he(Ee.defaults,e))},Ee.Cancel=ve,Ee.CancelToken=ke,Ee.isCancel=ee,Ee.all=function(e){return Promise.all(e)},Ee.spread=function(e){return function(t){return e.apply(null,t)}};var xe=Ee,Se=Ee;xe.default=Se;var Oe=xe;let $e,Ce,je=!0;function Ae(){je=null===document.querySelector("body.userrole-authenticated"),$e=document.getElementsByTagName("body")[0].dataset.portalUrl,Ce=Oe.create({baseURL:$e,headers:{Accept:"application/json"}})}"loading"!==document.readyState?Ae():document.addEventListener("DOMContentLoaded",Ae);const Ne=(e,t,n,r)=>{if(je)return Promise.reject(new Error("Anonymous user"));let o={method:e,url:t,headers:r};return"get"==e?o.params=n:o.data=n,Ce(o).then(e=>Promise.resolve(e.data)).catch(e=>(404!=error.response.status&&console.error(e),Promise.reject(e)))},Re=e=>{return(t="@bookmark",n=e,Ne("put",t,n)).catch(e=>{});var t,n},Te=e=>{return(t="@bookmark",n=e,Ne("delete",t,n)).catch(e=>{});var t,n},Le=()=>{return(e="@bookmarks",Ne("get",e,t)).catch(e=>{});var e,t},Be=function(e,n=t){let r;const o=[];function a(t){if(i(e,t)&&(e=t,r)){const t=!q.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),q.push(n,e)}if(t){for(let e=0;e<q.length;e+=2)q[e][0](q[e+1]);q.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,s=t){const u=[i,s];return o.push(u),1===o.length&&(r=n(a)||t),i(e),()=>{const e=o.indexOf(u);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}(new Map);if(Be.add=(e,t,n)=>{Be.update(r=>{let o={uid:e,created:Math.floor((new Date).getTime()/1e3),group:t,payload:n};r.set(e+t,o),Re(o);let a=new Event("collective.bookmarks.added.bookmark");return document.dispatchEvent(a),r})},Be.delete=(e,t)=>{Be.update(n=>{Te(n.get(e+t)),n.delete(e+t);let r=new Event("collective.bookmarks.removed.bookmark");return document.dispatchEvent(r),n})},localStorage.getItem(D))for(const[e,t]of Object.entries(JSON.parse(localStorage.getItem(D))))Be.update(n=>(n.set(e,t),n));document.addEventListener("DOMContentLoaded",()=>{Le().then(e=>{e.forEach(e=>{Be.update(t=>{const n=e.uid+e.group,r=t.get(n);if(!r||r.created<e.created){let r={uid:e.uid,created:e.created,group:e.group,payload:e.payload};t.set(n,r)}return t})})}).catch(e=>{})});Be.subscribe(e=>{let t={};e.forEach((e,n)=>{t[n]=e});let n=JSON.stringify(t);localStorage.setItem(D,n)});function Ue(e){let t,n;return{c(){n=m(),t=new b(n)},m(r,o){t.m(e[3],r,o),c(r,n,o)},p(e,n){8&n&&t.p(e[3])},d(e){e&&l(n),e&&t.d()}}}function _e(e){let t,n;return{c(){n=m(),t=new b(n)},m(r,o){t.m(e[2],r,o),c(r,n,o)},p(e,n){4&n&&t.p(e[2])},d(e){e&&l(n),e&&t.d()}}}function Pe(e){let n,r,o,a;function i(e,t){return(null==r||19&t)&&(r=!!e[4].get(e[0]+e[1])),r?_e:Ue}let s=i(e,-1),u=s(e);return{c(){n=f("span"),u.c(),y(n,"class","collectivebookmarks marker svelte-ll4xj3")},m(t,r){c(t,n,r),u.m(n,null),o||(a=g(n,"click",e[5]),o=!0)},p(e,[t]){s===(s=i(e,t))&&u?u.p(e,t):(u.d(1),u=s(e),u&&(u.c(),u.m(n,null)))},i:t,o:t,d(e){e&&l(n),u.d(),o=!1,a()}}}function qe(e,t,n){let r;s(e,Be,e=>n(4,r=e));let{uid:o}=t,{group:a}=t,{payload:i}=t,{textmarked:u}=t,{textunmarked:c}=t;return e.$$set=e=>{"uid"in e&&n(0,o=e.uid),"group"in e&&n(1,a=e.group),"payload"in e&&n(6,i=e.payload),"textmarked"in e&&n(2,u=e.textmarked),"textunmarked"in e&&n(3,c=e.textunmarked)},[o,a,u,c,r,function(e){r.get(o+a)?Be.delete(o,a):Be.add(o,a,i)},i]}class De extends P{constructor(e){super(),_(this,e,qe,Pe,i,{uid:0,group:1,payload:6,textmarked:2,textunmarked:3})}}function Me(e,t,n){const r=e.slice();return r[9]=t[n],r}function Fe(e,t,n){const r=e.slice();return r[6]=t[n],r}function He(e){let t;return{c(){t=f("div"),y(t,"class","empty-bookmarks-list")},m(e,n){c(e,t,n)},d(e){e&&l(t)}}}function ze(e){let t,n,r,o,a,i=e[9].payload.imagetag&&Ie(e);function s(e,t){return e[9].payload.title?Xe:Je}let d=s(e),p=d(e);return{c(){t=f("div"),n=f("a"),i&&i.c(),o=h(),p.c(),a=h(),y(n,"href",r="resolveuid/"+e[9].uid),y(t,"class","bookmark")},m(e,r){c(e,t,r),u(t,n),i&&i.m(n,null),u(t,o),p.m(t,null),u(t,a)},p(e,o){e[9].payload.imagetag?i?i.p(e,o):(i=Ie(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null),1&o&&r!==(r="resolveuid/"+e[9].uid)&&y(n,"href",r),d===(d=s(e))&&p?p.p(e,o):(p.d(1),p=d(e),p&&(p.c(),p.m(t,a)))},d(e){e&&l(t),i&&i.d(),p.d()}}}function Ie(e){let t,n=e[9].payload.imagetag+"";return{c(){t=f("div"),y(t,"class","image")},m(e,r){c(e,t,r),t.innerHTML=n},p(e,r){1&r&&n!==(n=e[9].payload.imagetag+"")&&(t.innerHTML=n)},d(e){e&&l(t)}}}function Je(e){let t,n,r=e[9].uid+"";return{c(){t=f("div"),n=p(r),y(t,"class","uid")},m(e,r){c(e,t,r),u(t,n)},p(e,t){1&t&&r!==(r=e[9].uid+"")&&v(n,r)},d(e){e&&l(t)}}}function Xe(e){let t,n,r,o,a,i,s,d,m,b,k=e[9].payload.title+"",w=e[9].payload.description&&Ve(e);function E(...t){return e[5](e[9],...t)}return{c(){t=f("div"),n=f("a"),r=f("div"),o=p(k),a=h(),w&&w.c(),s=h(),d=f("div"),d.innerHTML='<span class="placeholder"><span class="label">Remove</span></span>',y(r,"class","title"),y(n,"href",i="resolveuid/"+e[9].uid),y(d,"class","remove svelte-6a93td"),y(t,"class","info")},m(e,i){c(e,t,i),u(t,n),u(n,r),u(r,o),u(n,a),w&&w.m(n,null),u(t,s),u(t,d),m||(b=g(d,"click",E),m=!0)},p(t,r){e=t,1&r&&k!==(k=e[9].payload.title+"")&&v(o,k),e[9].payload.description?w?w.p(e,r):(w=Ve(e),w.c(),w.m(n,null)):w&&(w.d(1),w=null),1&r&&i!==(i="resolveuid/"+e[9].uid)&&y(n,"href",i)},d(e){e&&l(t),w&&w.d(),m=!1,b()}}}function Ve(e){let t,n,r=e[9].payload.description+"";return{c(){t=f("div"),n=p(r),y(t,"class","description")},m(e,r){c(e,t,r),u(t,n)},p(e,t){1&t&&r!==(r=e[9].payload.description+"")&&v(n,r)},d(e){e&&l(t)}}}function Ke(e){let t,n=e[9].payload.title&&ze(e);return{c(){n&&n.c(),t=m()},m(e,r){n&&n.m(e,r),c(e,t,r)},p(e,r){e[9].payload.title?n?n.p(e,r):(n=ze(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&l(t)}}}function Ge(e){let t,n,r,o,a,i,s,m=e[6]+"",g=e[3](e[6]),b=[];for(let t=0;t<g.length;t+=1)b[t]=Ke(Me(e,g,t));return{c(){t=f("div"),n=f("div"),r=p(m),o=h(),a=f("div");for(let e=0;e<b.length;e+=1)b[e].c();i=h(),y(n,"class","group-header"),y(a,"class","group-list"),y(t,"class",s="bookmark-group "+e[6]+" svelte-6a93td")},m(e,s){c(e,t,s),u(t,n),u(n,r),u(t,o),u(t,a);for(let e=0;e<b.length;e+=1)b[e].m(a,null);u(t,i)},p(e,n){if(1&n&&m!==(m=e[6]+"")&&v(r,m),29&n){let t;for(g=e[3](e[6]),t=0;t<g.length;t+=1){const r=Me(e,g,t);b[t]?b[t].p(r,n):(b[t]=Ke(r),b[t].c(),b[t].m(a,null))}for(;t<b.length;t+=1)b[t].d(1);b.length=g.length}1&n&&s!==(s="bookmark-group "+e[6]+" svelte-6a93td")&&y(t,"class",s)},d(e){e&&l(t),d(b,e)}}}function Qe(e){let n,r,o,a=!e[1](e[0]),i=a&&He(),s=e[2](e[0]),p=[];for(let t=0;t<s.length;t+=1)p[t]=Ge(Fe(e,s,t));return{c(){n=f("div"),i&&i.c(),r=h();for(let e=0;e<p.length;e+=1)p[e].c();y(n,"class","bookmark-list"),y(n,"data-bookmarks-count",o=e[1](e[0]))},m(e,t){c(e,n,t),i&&i.m(n,null),u(n,r);for(let e=0;e<p.length;e+=1)p[e].m(n,null)},p(e,[t]){if(1&t&&(a=!e[1](e[0])),a?i||(i=He(),i.c(),i.m(n,r)):i&&(i.d(1),i=null),29&t){let r;for(s=e[2](e[0]),r=0;r<s.length;r+=1){const o=Fe(e,s,r);p[r]?p[r].p(o,t):(p[r]=Ge(o),p[r].c(),p[r].m(n,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=s.length}1&t&&o!==(o=e[1](e[0]))&&y(n,"data-bookmarks-count",o)},i:t,o:t,d(e){e&&l(n),i&&i.d(),d(p,e)}}}function We(e,t,n){let r;s(e,Be,e=>n(0,r=e));function o(e,t){Be.delete(e,t)}return[r,e=>e.size,e=>{const t=new Set;return e.forEach(e=>{t.add(e.group)}),Array.from(t).sort()},e=>{const t=Array();return r.forEach(n=>{n.group==e&&t.push(n)}),t},o,e=>o(e.uid,e.group)]}class Ye extends P{constructor(e){super(),_(this,e,We,Qe,i,{})}}function Ze(e){let t,n,r,o,a;return{c(){t=f("span"),n=f("i"),r=h(),o=f("span"),o.textContent="0",y(n,"class","bookmark-icon"),y(o,"class","amount"),y(t,"class","count empty"),y(t,"data-bookmarks-count",a=e[1](e[0]))},m(e,a){c(e,t,a),u(t,n),u(t,r),u(t,o)},p(e,n){1&n&&a!==(a=e[1](e[0]))&&y(t,"data-bookmarks-count",a)},d(e){e&&l(t)}}}function et(e){let t,n,r,o,a,i,s=e[1](e[0])+"";return{c(){t=f("span"),n=f("i"),r=h(),o=f("span"),a=p(s),y(n,"class","bookmark-icon"),y(o,"class","amount"),y(t,"class","count filled"),y(t,"data-bookmarks-count",i=e[1](e[0]))},m(e,i){c(e,t,i),u(t,n),u(t,r),u(t,o),u(o,a)},p(e,n){1&n&&s!==(s=e[1](e[0])+"")&&v(a,s),1&n&&i!==(i=e[1](e[0]))&&y(t,"data-bookmarks-count",i)},d(e){e&&l(t)}}}function tt(e){let n,r;function o(e,t){return(null==n||1&t)&&(n=!!e[1](e[0])),n?et:Ze}let a=o(e,-1),i=a(e);return{c(){i.c(),r=m()},m(e,t){i.m(e,t),c(e,r,t)},p(e,[t]){a===(a=o(e,t))&&i?i.p(e,t):(i.d(1),i=a(e),i&&(i.c(),i.m(r.parentNode,r)))},i:t,o:t,d(e){i.d(e),e&&l(r)}}}function nt(e,t,n){let r;s(e,Be,e=>n(0,r=e));return E(()=>{let e=new Event("collective.bookmarks.updated.sum");document.dispatchEvent(e)}),[r,e=>e.size]}class rt extends P{constructor(e){super(),_(this,e,nt,tt,i,{})}}return e.bindBookmarkListOnElement=function(e){new Ye({target:e,props:{}})},e.bindBookmarkOnElement=function(e,t,n,r,o="&#9733;",a="&#9734;"){new De({target:e,props:{uid:t,group:n,textmarked:o,textunmarked:a,payload:r}})},e.bindBookmarkSumOnElement=function(e){new rt({target:e,props:{}})},e}({});
//# sourceMappingURL=collective.bookmarks.js.map
